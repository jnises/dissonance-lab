- [x] Multi-touch support and piano GUI refactor
  - Multi-pointer tracking, state/rendering split, uses `wmidi::Note`/`Semitone`, debug assertions, interval display compatibility.
- [x] Shift key acts as sustain pedal
  - GUI and synth support, improved sustain logic, visual indication.
- [x] Enforced dark mode theme
- [x] Visual differentiation of key states in piano GUI
  - Distinct colors for pressed, sustained, and external keys.
- [x] Extended synth sustain duration (slower decay)
- [x] Piano GUI types refactored into `piano_types.rs`
  - Shared types (`Semitone`, `PointerId`, `KeySet`, `ExternalKeySet`) for modularity.
- [x] Piano business logic moved to `PianoState`
  - Handles key state, sustain, actions; GUI delegates logic; unit tested.
- [x] Tests for GUI/MIDI input, sustain pedal, key/sustain interactions
- [x] External MIDI notes octave-normalized in GUI
  - All MIDI notes display on correct key; added tests and Semitone constants.
- [x] Combined shift and MIDI sustain sources for synth pedal actions
  - Pedal on/off only when both inactive; order-independent; tested.
- [x] Sustain pedal polarity toggle for MIDI controllers
  - User-toggleable, persists in local storage, fixes inverted pedal.
- [x] Removed agent-generated change-description comments from codebase
- [x] Replaced most `#[allow(...)]` with `#[expect(...)]`
  - Kept `#[allow(dead_code)]` only for public API constants provided for convenience.
- [x] Reverb tests: impulse response, wet/dry, room size, damping, clamping, stability, initialization bug fixed.
- [ ] model piano string stiffness inharmonicity
- [ ] Calculate dissonances using critical bands theory (plomp levelt) instead.
    - This would allow us to calculate the dissonance of entire chords
    - how do we handle the fact that we only show a single octave? just force the calculation to happen on a single central octave?
    - can critical bands theory be made octave normalized?
    - does critical bands theory care about the root? do we need to know which note is the root? can the overtones be extended downwards?
- [ ] The dissonance of the currently held notes should show somewhere prominent
- [ ] We only need one row of dissonances that shows what dissonance a new note would result in.
    - for the second note we show the same as we currently do
    - for more notes we show what chord they would result in
- [ ] Make the console output from the audio worklet also forward back to the dev server. perhaps we need to have the audio worklet log using a message instead of straight to console
- [ ] go through the codebase looking for comments that say what has been changed. as is typical of coding agents. remove those as they are not useful longterm
- [ ] Could the midi input callback be moved out of the rust code to make it lower latency?
